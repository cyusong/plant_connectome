<i>Agriophyllum squarrosum</i> (L.) Moq., well known as sandrice, is an important wild forage in sandy areas and a promising edible and medicinal resource plant with great domestication potential. Previous studies showed flavonoids are one of the most abundant medicinal ingredients in sandrice, whereby isorhamnetin and isorhamnetin-3-glycoside were the top two flavonols with multiple health benefits. However, the molecular regulatory mechanisms of flavonoids in sandrice remain largely unclear. Based on a common garden trial, in this study, an integrated transcriptomic and flavonoids-targeted metabolomic analysis was performed on the vegetative and reproductive periods of six sandrice ecotypes, whose original habitats covered a variety of environmental factor gradients. Multiple linear stepwise regression analysis unveiled that flavonoid accumulation in sandrice was positively correlated with temperature and UVB and negatively affected by precipitation and sunshine duration, respectively. Weighted co-expression network analysis (WGCNA) indicated the <i>bHLH</i> and <i>MYB</i> transcription factor (TF) families might play key roles in sandrice flavonoid biosynthesis regulation. A total of 22,778 differentially expressed genes (DEGs) were identified between ecotype DL and ecotype AEX, the two extremes in most environmental factors, whereby 85 DEGs could be related to known flavonoid biosynthesis pathway. A sandrice flavonoid biosynthesis network embracing the detected 23 flavonoids in this research was constructed. Gene families <i>Plant flavonoid O-methyltransferase</i> (<i>AsPFOMT</i>) and <i>UDP-glucuronosyltransferase</i> (<i>AsUGT78D2</i>) were identified and characterized on the transcriptional level and believed to be synthases of isorhamnetin and isorhamnetin-3-glycoside in sandrice, respectively. A trade-off between biosynthesis of rutin and isorhamnetin was found in the DL ecotype, which might be due to the metabolic flux redirection when facing environmental changes. This research provides valuable information for understanding flavonoid biosynthesis in sandrice at the molecular level and laid the foundation for precise development and utilization of this functional resource forage.

Temperature: !affects! Flavonoid accumulation 
UVB: !affects! Flavonoid accumulation 
Precipitation: !represses! Flavonoid accumulation 
Sunshine duration: !represses! Flavonoid accumulation 
bHLH: !regulates! Flavonoid biosynthesis 
MYB: !regulates! Flavonoid biosynthesis 
AsPFOMT: !synthesizes! Isorhamnetin 
AsUGT78D2: !synthesizes! Isorhamnetin-3-glycoside 
Rutin: !competes with! Isorhamnetin