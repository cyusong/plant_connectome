The inappropriate application of pesticides to vegetable crops often results in environmental pollution, which seriously impacts the environment and human health. Given that current methods of pesticide residue detection are associated with issues such as low accuracy, high equipment cost, and complex flow, this study puts forward a new method for detecting pesticide residues on lettuce leaves. To establish this method, spectral analysis was used to determine the characteristic wavelength of pesticide residues (709 nm), machine vision equipment was improved, and a bandpass filter and light source of characteristic wavelength were installed to acquire leaf image information. Next, image preprocessing and feature information extraction were automatically implemented through programming. Several links were established for the training model so that the required feature information could be automatically extracted after the batch input of images. The pesticide residue detected using the chemical method was taken as the output and modeled, together with the input image information, using the convolutional neural network (CNN) algorithm. Furthermore, a prediction program was rewritten to generalize the input images during the prediction process and directly obtain the output pesticide residue. The experimental results revealed that when the detection device and method designed in this study were used to detect pesticide residues on lettuce leaves in a key state laboratory, the coefficient of determination of the equation reached 0.883, and the root mean square error (RMSE) was 0.134 mg/L, indicating high accuracy and that the proposed method integrated the advantages of spectrum detection and deep learning. According to comparison testing, the proposed method can meet Chinese national standards in terms of accuracy. Moreover, the improved machine vision equipment was less expensive, thus providing powerful support for the application and popularization of the proposed method.

Spectral analysis: !determines! Characteristic wavelength 
Machine vision equipment: !improved! Feature information extraction 
Bandpass filter: !installed! Light source of characteristic wavelength 
Programming: !automatically implements! Image preprocessing 
CNN algorithm: !models! Pesticide residue 
Prediction program: !rewrites! Input images